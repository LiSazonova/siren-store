"use strict";(()=>{var e={};e.id=553,e.ids=[553],e.modules={1287:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},640:(e,s,a)=>{a.r(s),a.d(s,{config:()=>l,default:()=>u,routeModule:()=>g});var t={};a.r(t),a.d(t,{default:()=>handler});var r=a(1802),o=a(7153),n=a(6249);let i=require("axios");var c=a.n(i);let d=c().create({baseURL:"https://siren-store.onrender.com"});d.interceptors.request.use(e=>e,e=>Promise.reject(e));let registerUser=async(e,s,a)=>{console.log("Данные для API:",{username:e,email:s,password:a});try{let t=await d.post("/api/auth/local/register",{username:e,email:s,password:a});return console.log("Успешный ответ от API:",t.data),{success:!0,data:t.data}}catch(e){return console.error("Ошибка в запросе API:",e.response?.data||e.message),{success:!1,message:e.response?.data?.error?.message||"Ошибка регистрации"}}};async function handler(e,s){if("POST"===e.method)try{let{username:a,email:t,password:r}=e.body,o=await registerUser(a,t,r);o.data.success?s.status(200).json(o.data):s.status(400).json({message:o.data.message||"Ошибка регистрации"})}catch(e){e instanceof Error?s.status(500).json({message:e.message||"Ошибка при регистрации"}):s.status(500).json({message:"Неизвестная ошибка"})}else s.status(405).json({message:"Метод не поддерживается"})}let u=(0,n.l)(t,"default"),l=(0,n.l)(t,"config"),g=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/register",pathname:"/api/register",bundlePath:"",filename:""},userland:t})}};var s=require("../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[222],()=>__webpack_exec__(640));module.exports=a})();