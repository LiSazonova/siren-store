(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{747:function(e,t,n){Promise.resolve().then(n.t.bind(n,6573,23)),Promise.resolve().then(n.t.bind(n,3736,23)),Promise.resolve().then(n.t.bind(n,2579,23)),Promise.resolve().then(n.t.bind(n,3141,23)),Promise.resolve().then(n.bind(n,7948)),Promise.resolve().then(n.t.bind(n,2489,23)),Promise.resolve().then(n.t.bind(n,3343,23)),Promise.resolve().then(n.bind(n,4833)),Promise.resolve().then(n.bind(n,1907)),Promise.resolve().then(n.bind(n,4027))},4833:function(e,t,n){"use strict";n.r(t);var a=n(7437);n(2265);var r=n(7948),s=n(220);n(3343);var o=n(680);t.default=e=>{let{children:t}=e;return(0,a.jsx)(s.rg,{clientId:"126878375392-5s628gs319unv9jkbqn921jicbiip8j8.apps.googleusercontent.com",children:(0,a.jsxs)(o.H,{children:[t,(0,a.jsx)(r.ToastContainer,{})]})})}},1907:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Header_Header}});var a=n(7437),r=n(2265),s=n(4225),o=n.n(s),c=n(1396),i=n.n(c),l=n(6691),u=n.n(l),d=n(2458),h=n.n(d),Logo_Logo=()=>(0,a.jsx)(i(),{href:"/",className:h().logo,children:(0,a.jsx)(u(),{src:"/images/logo/logo.svg",alt:"Siren Store",width:52,height:78,priority:!0})}),m=n(4033),_=n(1032),g=n.n(_),Desktop=()=>{let e=(0,m.usePathname)(),isActive=t=>e===t;return(0,a.jsxs)("nav",{className:g().menu,children:[(0,a.jsx)(i(),{href:"/",className:"".concat(g().menuItem," ").concat(isActive("/")?g().active:""),children:"Головна"}),(0,a.jsx)(i(),{href:"/collections",className:"".concat(g().menuItem," ").concat(isActive("/collections")?g().active:""),children:"Колекції"}),(0,a.jsx)(i(),{href:"/about",className:"".concat(g().menuItem," ").concat(isActive("/about-us")?g().active:""),children:"Про нас"})]})},p=n(3038),v=n.n(p),f=n(6408),SearchBar_SearchBar=e=>{let{isDesktop:t=!1,isSearchOpen:n=!1,onOpen:s,onClose:o}=e,[c,i]=(0,r.useState)(""),[l,u]=(0,r.useState)([]),d=(0,m.useRouter)(),handleSearch=async e=>{let t=e.target.value.toLowerCase();if(i(t),t)try{let e=await fetch("https://siren-store.onrender.com/api/collections"),n=await fetch("https://siren-store.onrender.com/api/products"),a=await e.json(),r=await n.json(),s=a.data.filter(e=>e.title.toLowerCase().includes(t)).map(e=>({id:e.id,slug:e.slug,name:e.title,type:"collection"})),o=r.data.filter(e=>e.name.toLowerCase().includes(t)).map(e=>({id:e.id,slug:e.slug,name:e.name,type:"product"}));u([...s,...o])}catch(e){console.error("Ошибка при поиске:",e),u([])}else u([])},handleResultClick=(e,t)=>{"collection"===t?d.push("/collections/".concat(e)):d.push("/products/".concat(e)),i(""),u([]),o&&o()},handleKeyDown=e=>{if("Enter"===e.key){if(l.length>0){let e=l[0];handleResultClick(e.slug,e.type)}else d.push("/not-found"),i(""),u([])}};return t?(0,a.jsxs)("div",{className:v().searchContainer,children:[(0,a.jsxs)("div",{className:v().searchBar,children:[(0,a.jsx)("input",{type:"text",placeholder:"Пошук",className:v().searchInput,value:c,onChange:handleSearch,onKeyDown:handleKeyDown}),(0,a.jsx)(f.Z,{name:"search_grey",className:v().searchIcon,width:25,height:24,alt:"Search Icon"})]}),l.length>0&&(0,a.jsx)("div",{className:v().dropdownMenu,children:l.map(e=>(0,a.jsx)("div",{className:v().dropdownItem,onClick:()=>handleResultClick(e.slug,e.type),children:e.name},e.id))})]}):n?(0,a.jsxs)("div",{className:v().searchContainer,children:[(0,a.jsxs)("div",{className:v().searchBar,children:[(0,a.jsx)("input",{type:"text",placeholder:"Пошук",className:v().searchInput,value:c,onChange:handleSearch,onKeyDown:handleKeyDown}),(0,a.jsx)(f.Z,{name:"search_grey",className:v().searchIcon,width:25,height:24,alt:"Search Icon"})]}),(0,a.jsx)("button",{onClick:o,"aria-label":"Close Search",className:v().closeButton,children:(0,a.jsx)(f.Z,{name:"close",width:25,height:24,alt:"Close Icon"})}),l.length>0&&(0,a.jsx)("div",{className:v().dropdownMenu,children:l.map(e=>(0,a.jsx)("div",{className:v().dropdownItem,onClick:()=>handleResultClick(e.slug,e.type),children:e.name},e.id))})]}):(0,a.jsx)("button",{onClick:s,"aria-label":"Search Icon",className:v().searchButton,children:(0,a.jsx)(f.Z,{name:"search",width:25,height:24,alt:"Search Icon"})})},x=n(3549),j=n.n(x),DesktopIcons_DesktopIcons=e=>{let{onUserClick:t,onCartClick:n,cartItems:r}=e;return(0,a.jsxs)("div",{className:j().desktopIcons,children:[(0,a.jsx)(i(),{href:"https://www.instagram.com/__the_siren__official_/profilecard/?igsh=MTA5OWE4d3luaXA2eg==",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(f.Z,{name:"inst",width:24,height:24,alt:"Instagram"})}),(0,a.jsxs)("div",{className:j().cartWrapper,onClick:n,children:[(0,a.jsx)(f.Z,{name:"basket",width:24,height:24,alt:"Корзина"}),r>0&&(0,a.jsx)("span",{className:j().cartCount,children:r})]}),(0,a.jsx)(f.Z,{name:"user",width:24,height:24,alt:"Пользователь",onClick:t})]})},C=n(7842),I=n.n(C),Icons_Icons=e=>{let{onCartClick:t,cartCount:n}=e;return(0,a.jsxs)("div",{className:I().icons,children:[(0,a.jsx)(i(),{href:"https://www.instagram.com/__the_siren__official_/profilecard/?igsh=MTA5OWE4d3luaXA2eg==",target:"_blank",rel:"noopener noreferrer",children:(0,a.jsx)(f.Z,{name:"inst",width:24,height:24,alt:"Instagram"})}),(0,a.jsxs)("div",{className:I().cartWrapper,onClick:t,children:[(0,a.jsx)(f.Z,{name:"basket",width:24,height:24,alt:"Корзина"}),n>0&&(0,a.jsx)("span",{className:I().cartCount,children:n})]})]})},b=n(4089),k=n.n(b),w=n(680),MobileMenu_MobileMenu=()=>{let[e,t]=(0,r.useState)(!1),n=(0,m.usePathname)(),{user:s,logout:o}=(0,w.a)(),c=(0,m.useRouter)(),l=(0,r.useRef)(null),u=(0,r.useRef)(null),isActive=e=>n===e;return(0,r.useEffect)(()=>{let handleClickOutside=e=>{var n;!l.current||l.current.contains(e.target)||(null===(n=u.current)||void 0===n?void 0:n.contains(e.target))||t(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{ref:u,onClick:e=>{e.stopPropagation(),t(e=>!e)},"aria-label":e?"Close Menu":"Open Menu",className:k().menuButton,children:(0,a.jsx)(f.Z,{name:e?"close":"menu",width:24,height:24,alt:e?"Close Menu":"Open Menu"})}),e&&(0,a.jsx)("nav",{className:"".concat(k().mobileMenu," ").concat(e?k().mobileMenuOpen:""),ref:l,children:(0,a.jsxs)("div",{className:k().mobileMenuContainer,children:[(0,a.jsx)(i(),{href:"/",className:"".concat(k().mobileMenuItem," ").concat(isActive("/")?k().active:""),onClick:()=>t(!1),children:"Головна"}),(0,a.jsx)(i(),{href:"/collections",className:"".concat(k().mobileMenuItem," ").concat(isActive("/collections")?k().active:""),onClick:()=>t(!1),children:"Колекції"}),(0,a.jsx)(i(),{href:"/about",className:"".concat(k().mobileMenuItem," ").concat(isActive("/about-us")?k().active:""),onClick:()=>t(!1),children:"Про нас"}),(0,a.jsx)("div",{className:"".concat(k().mobileMenuItem," ").concat(k().authLinks),children:s?(0,a.jsx)("button",{onClick:()=>{o(),t(!1),c.push("/")},className:k().authButton,children:"Вийти"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{href:"/auth/login",onClick:()=>t(!1),className:k().authLink,children:"Вхід"}),(0,a.jsx)(i(),{href:"/auth/register",onClick:()=>t(!1),className:k().authLink,children:"Реєстрація"})]})})]})})]})},S=n(4027),Header_Header=()=>{let{user:e,logout:t}=(0,w.a)(),{cartItems:n}=(0,S.useCart)(),[s,c]=(0,r.useState)(!1),[l,u]=(0,r.useState)(!1),d=(0,m.useRouter)(),h=(0,r.useRef)(null),handleCartClick=()=>{d.push("/cart")};return(0,r.useEffect)(()=>{let handleClickOutside=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return l?document.addEventListener("mousedown",handleClickOutside):document.removeEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[l]),(0,a.jsx)("header",{className:o().header,children:(0,a.jsxs)("div",{className:o().container,children:[(0,a.jsxs)("div",{className:o().desktopOnly,children:[(0,a.jsx)(Logo_Logo,{}),(0,a.jsx)(Desktop,{}),(0,a.jsx)(SearchBar_SearchBar,{isDesktop:!0}),(0,a.jsx)(DesktopIcons_DesktopIcons,{onUserClick:()=>u(!l),onCartClick:handleCartClick,cartItems:n.length}),l&&(0,a.jsx)("div",{className:o().authDropdown,ref:h,children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["Привіт, ",e.username,"!"]}),(0,a.jsx)("button",{onClick:()=>{t(),u(!1),d.push("/")},children:"ВИЙТИ"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{href:"/auth/login",children:"ВХІД"}),(0,a.jsx)(i(),{href:"/auth/register",children:"РЕЄСТРАЦІЯ"})]})})]}),(0,a.jsxs)("div",{className:o().mobileOnly,children:[(0,a.jsx)(Logo_Logo,{}),(0,a.jsxs)("div",{className:o().mobileNav,children:[(0,a.jsx)(SearchBar_SearchBar,{isDesktop:!1,isSearchOpen:s,onOpen:()=>c(!0),onClose:()=>c(!1)}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Icons_Icons,{onCartClick:handleCartClick,cartCount:n.length}),(0,a.jsx)(MobileMenu_MobileMenu,{})]})]})]})]})})}},6408:function(e,t,n){"use strict";var a=n(7437);n(2265);var r=n(6691),s=n.n(r),o=n(5328),c=n.n(o);t.Z=e=>{let{name:t,width:n,height:r,alt:o,className:i,onClick:l}=e;return(0,a.jsx)("div",{className:"".concat(c().iconContainer," ").concat(i||""),onClick:l,role:"button","aria-label":o||t,tabIndex:0,onKeyPress:e=>{"Enter"===e.key&&(null==l||l())},children:(0,a.jsx)(s(),{src:"/images/icons/".concat(t,".svg"),alt:o||t,width:n,height:r})})}},680:function(e,t,n){"use strict";n.d(t,{H:function(){return AuthProvider},a:function(){return useAuth}});var a=n(7437),r=n(2265),s=n(6454),o=n(2164);let c=(0,r.createContext)(void 0),useAuth=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},AuthProvider=e=>{let{children:t}=e,[n,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("jwt"),t=localStorage.getItem("user");if(e&&t)try{let e=JSON.parse(t);i(e)}catch(e){console.error("Ошибка восстановления пользователя:",e),localStorage.removeItem("jwt"),localStorage.removeItem("user")}},[]);let register=async(e,t,n)=>{try{let a=await (0,s.a$)(e,t,n),{jwt:r,user:o}=a.data;return localStorage.setItem("jwt",r),localStorage.setItem("user",JSON.stringify(o)),i(o),{success:!0,data:a.data}}catch(e){if(e instanceof o.d7){var a,r,c;return{success:!1,message:(null===(c=e.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:null===(a=r.error)||void 0===a?void 0:a.message)||"Ошибка регистрации"}}return{success:!1,message:"Произошла неизвестная ошибка"}}},login=async(e,t)=>{try{let n=await (0,s.pH)(e,t),{jwt:a,user:r}=n.data;return localStorage.setItem("jwt",a),localStorage.setItem("user",JSON.stringify(r)),i(r),!0}catch(e){return console.error("Ошибка логина:",e),!1}};return(0,a.jsx)(c.Provider,{value:{register,login,user:n,logout:()=>{i(null),localStorage.removeItem("jwt"),localStorage.removeItem("user")}},children:t})}},4027:function(e,t,n){"use strict";n.r(t),n.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var a=n(7437),r=n(2265);let s=(0,r.createContext)(void 0),CartProvider=e=>{let{children:t}=e,[n,o]=(0,r.useState)([]),[c,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{try{let e=localStorage.getItem("cartItems");if(e){let t=JSON.parse(e);console.log("Loaded cart items from localStorage:",t),o(t)}else console.log("No cart items found in localStorage.")}catch(e){console.error("Ошибка при восстановлении данных корзины:",e)}finally{i(!0)}},[]),(0,r.useEffect)(()=>{c&&(console.log("Saving cart items to localStorage:",n),localStorage.setItem("cartItems",JSON.stringify(n)))},[n,c]),(0,a.jsx)(s.Provider,{value:{cartItems:n,addToCart:e=>{o(t=>{let n=t.find(t=>t.id===e.id&&t.size===e.size);return n?(console.log("Updating quantity for existing item:",n),t.map(t=>t.id===e.id&&t.size===e.size?{...t,quantity:t.quantity+e.quantity}:t)):(console.log("Adding new item to cart:",e),[...t,e])})},removeCartItem:e=>{console.log("Removing item from cart with id:",e),o(t=>t.filter(t=>t.id!==e))}},children:t})},useCart=()=>{let e=(0,r.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e}},6454:function(e,t,n){"use strict";n.d(t,{a$:function(){return registerUser},pH:function(){return loginUser}});var a=n(4829);let r=a.default.create({baseURL:"https://siren-store.onrender.com"});r.interceptors.request.use(e=>{let t=localStorage.getItem("jwt");return t&&"/api/auth/local/register"!==e.url&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let registerUser=async(e,t,n)=>{console.log("Данные для API:",{username:e,email:t,password:n});try{let a=await r.post("/api/auth/local/register",{username:e,email:t,password:n});return console.log("Успешный ответ от API:",a.data),{success:!0,data:a.data}}catch(e){var a,s,o,c;return console.error("Ошибка в запросе API:",(null===(a=e.response)||void 0===a?void 0:a.data)||e.message),{success:!1,message:(null===(c=e.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:null===(s=o.error)||void 0===s?void 0:s.message)||"Ошибка регистрации"}}},loginUser=async(e,t)=>{try{let n=await r.post("/api/auth/local",{identifier:e,password:t});return console.log("Логин успешен:",n.data),n}catch(e){var n;throw console.error("Ошибка логина:",(null===(n=e.response)||void 0===n?void 0:n.data)||e.message),e}};t.ZP=r},2489:function(){},3549:function(e){e.exports={desktopIcons:"DesktopIcons_desktopIcons__N7bkl",cartWrapper:"DesktopIcons_cartWrapper__YxCJ2",cartCount:"DesktopIcons_cartCount__q8784"}},1032:function(e){e.exports={menu:"Desktop_menu__nCmTb",menuItem:"Desktop_menuItem__JIdXG",active:"Desktop_active__HI_zY"}},4225:function(e){e.exports={header:"Header_header__AF_3G",container:"Header_container__3JNoS",desktopOnly:"Header_desktopOnly___h00J",mobileOnly:"Header_mobileOnly__y57Tj",mobileNav:"Header_mobileNav__6HOrM",authDropdown:"Header_authDropdown__V1fW3",cartIcon:"Header_cartIcon__d8fsU",cartBadge:"Header_cartBadge__cmo77"}},5328:function(e){e.exports={iconButton:"Icon_iconButton__yY2i9"}},7842:function(e){e.exports={icons:"Icons_icons__nHEjY",cartWrapper:"Icons_cartWrapper__sY3EY",cartCount:"Icons_cartCount___IWCa"}},2458:function(e){e.exports={logo:"Logo_logo__c5nVK"}},4089:function(e){e.exports={menuButton:"MobileMenu_menuButton__m4HHI",mobileMenu:"MobileMenu_mobileMenu__EfGda",mobileMenuOpen:"MobileMenu_mobileMenuOpen__M703R",mobileMenuContainer:"MobileMenu_mobileMenuContainer__lDgGV",mobileMenuItem:"MobileMenu_mobileMenuItem__Vuz_a",authLinks:"MobileMenu_authLinks__xc0g2",authLink:"MobileMenu_authLink__Wp1OV",active:"MobileMenu_active__GurVK",authButton:"MobileMenu_authButton__1MzSh"}},3038:function(e){e.exports={searchBar:"SearchBar_searchBar__hUGQq",searchInput:"SearchBar_searchInput__jatEt",searchIcon:"SearchBar_searchIcon__Hx8hf",searchContainer:"SearchBar_searchContainer__uph7D",closeButton:"SearchBar_closeButton__xl5On",searchButton:"SearchBar_searchButton__lFj8T",dropdownMenu:"SearchBar_dropdownMenu__5tMiv",dropdownItem:"SearchBar_dropdownItem__O11TE",noResults:"SearchBar_noResults__NIyhy"}}},function(e){e.O(0,[413,326,787,524,971,472,744],function(){return e(e.s=747)}),_N_E=e.O()}]);