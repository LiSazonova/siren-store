(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{49:function(e,t,r){Promise.resolve().then(r.bind(r,2015))},679:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return u}});let a=r(1024),n=r(7929),s=r(2637),i=r(413),o=a._(r(9950)),unstable_getImgProps=e=>{(0,s.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},u=i.Image},2015:function(e,t,r){"use strict";r.r(t);var a=r(7437),n=r(2265),s=r(4033),i=r(1396),o=r.n(i),u=r(680),l=r(9586),c=r.n(l),d=r(6691),h=r.n(d);t.default=()=>{let{login:e}=(0,u.a)(),t=(0,s.useRouter)(),[r,i]=(0,n.useState)({identifier:"",password:""}),[l,d]=(0,n.useState)(null),handleChange=e=>i({...r,[e.target.name]:e.target.value}),handleSubmit=async a=>{a.preventDefault();let n=await e(r.identifier,r.password);n?t.push("/"):d("Ошибка входа. Проверьте данные и попробуйте снова.")};return(0,a.jsx)("section",{className:c().auth,children:(0,a.jsxs)("div",{className:c().authContainer,children:[(0,a.jsx)("div",{className:c().authDecoration,children:(0,a.jsx)(h(),{src:"/images/decorations/login_siren.svg",width:583,height:321,alt:"Login Decoration"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:c().authTitle,children:"ВХІД"}),l&&(0,a.jsx)("p",{className:c().error,children:l}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:c().authForm,children:[(0,a.jsx)("label",{htmlFor:"identifier",children:"Будь ласка, введіть свою електронну адресу"}),(0,a.jsx)("input",{type:"text",name:"identifier",id:"identifier",placeholder:"Електронна адреса",value:r.identifier,onChange:handleChange,required:!0}),(0,a.jsx)("label",{htmlFor:"password",children:"Будь ласка, введіть свій пароль"}),(0,a.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Пароль",value:r.password,onChange:handleChange,required:!0}),(0,a.jsx)("p",{className:c().forgotPassword,children:(0,a.jsx)(o(),{href:"/auth/forgot-password",children:"Забули пароль ?"})}),(0,a.jsx)("button",{type:"submit",className:c().submitButton,children:"УВІЙТИ"})]}),(0,a.jsxs)("p",{children:["Нет аккаунта? ",(0,a.jsx)(o(),{href:"/auth/register",children:"Зарегистрироваться"})]})]})]})})}},680:function(e,t,r){"use strict";r.d(t,{H:function(){return AuthProvider},a:function(){return useAuth}});var a=r(7437),n=r(2265),s=r(6454),i=r(2164);let o=(0,n.createContext)(void 0),useAuth=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},AuthProvider=e=>{let{children:t}=e,[r,u]=(0,n.useState)(null),register=async(e,t,r)=>{try{let a=await (0,s.a$)(e,t,r);return u(a.data),localStorage.setItem("jwt",a.data.token),{success:!0,data:a.data}}catch(e){if(e instanceof i.d7){var a,n;return{success:!1,message:(null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message)||"Ошибка регистрации"}}if(e instanceof Error)return{success:!1,message:e.message||"Ошибка регистрации"};return{success:!1,message:"Произошла неизвестная ошибка"}}},login=async(e,t)=>{try{let r=await (0,s.pH)(e,t);return u(r.data),localStorage.setItem("jwt",r.data.token),!0}catch(e){return i.d7,!1}};return(0,a.jsx)(o.Provider,{value:{register,login,user:r,logout:()=>{u(null),localStorage.removeItem("jwt")}},children:t})}},6454:function(e,t,r){"use strict";r.d(t,{a$:function(){return registerUser},pH:function(){return loginUser}});var a=r(4829);let n=a.default.create({baseURL:"http://localhost:1337"});n.interceptors.request.use(e=>{let t=localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let registerUser=(e,t,r)=>n.post("/api/auth/local/register",{username:e,email:t,password:r}),loginUser=(e,t)=>n.post("/api/auth/local",{identifier:e,password:t});t.ZP=n},9586:function(e){e.exports={auth:"LoginPage_auth__bvUnk",authContainer:"LoginPage_authContainer__xbBqU",authTitle:"LoginPage_authTitle__Sp77X",authForm:"LoginPage_authForm__Q80WW",forgotPassword:"LoginPage_forgotPassword__fVD3U",authDecoration:"LoginPage_authDecoration__pjgSX"}},6691:function(e,t,r){e.exports=r(679)},4033:function(e,t,r){e.exports=r(94)},2164:function(e,t,r){"use strict";r.d(t,{d7:function(){return s}});var a=r(4829);let{Axios:n,AxiosError:s,CanceledError:i,isCancel:o,CancelToken:u,VERSION:l,all:c,Cancel:d,isAxiosError:h,spread:g,toFormData:f,AxiosHeaders:m,HttpStatusCode:p,formToJSON:_,getAdapter:v,mergeConfig:j}=a.default}},function(e){e.O(0,[413,326,787,971,472,744],function(){return e(e.s=49)}),_N_E=e.O()}]);