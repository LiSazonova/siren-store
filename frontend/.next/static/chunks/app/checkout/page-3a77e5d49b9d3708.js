(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{6483:function(e,t,a){Promise.resolve().then(a.bind(a,8816))},679:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return o}});let r=a(1024),n=a(7929),l=a(2637),s=a(413),i=r._(a(9950)),unstable_getImgProps=e=>{(0,l.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}},o=s.Image},8816:function(e,t,a){"use strict";a.r(t);var r=a(7437),n=a(4027),l=a(3951),s=a.n(l),i=a(6691),o=a.n(i),c=a(2265);t.default=()=>{let{cartItems:e,removeCartItem:t}=(0,n.useCart)(),[a,l]=(0,c.useState)({name:"",email:"",country:"",address:"",delivery:"",payment:""}),i=e.reduce((e,t)=>{let a=Number(t.price)||0,r=Number(t.quantity)||0;return e+a*r},0);if(!e.length)return(0,r.jsx)("h1",{className:s().emptyCart,children:"Корзина пуста"});let validateForm=e=>{let t={name:e.name?"":"Будь ласка, введіть своє ім’я.",email:e.email?"":"Будь ласка, введіть свою електронну адресу.",country:e.country?"":"Будь ласка, введіть свою країну.",address:e.address?"":"Будь ласка, введіть свою адресу.",delivery:e.delivery?"":"Будь ласка, виберіть спосіб доставки.",payment:e.payment?"":"Будь ласка, виберіть спосіб оплати."};return l(t),Object.values(t).every(e=>""===e)},handleOrderSubmit=async t=>{t.preventDefault();let a=document.querySelector("form");if(!a)return;let r=new FormData(a),n={name:r.get("name"),email:r.get("email"),country:r.get("country"),address:r.get("address"),delivery:r.get("delivery"),payment:r.get("payment")};if(validateForm(n))try{let t=await fetch("/api/create-wayforpay-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cartItems:e,totalAmount:i,customer:n})}),a=await t.json();a.paymentUrl?window.location.href=a.paymentUrl:alert("Ошибка при создании платежа. Попробуйте снова.")}catch(e){console.error("Error creating payment:",e),alert("Произошла ошибка. Попробуйте позже.")}};return(0,r.jsxs)("main",{className:s().checkoutPage,children:[(0,r.jsx)("h1",{className:s().title,children:"ОФОРМЛЕННЯ ЗАМОВЛЕННЯ"}),(0,r.jsxs)("form",{className:s().form,children:[(0,r.jsxs)("label",{className:s().label,children:["Будь ласка, введіть своє ім’я:",(0,r.jsx)("input",{className:s().input,type:"text",name:"name",placeholder:"Ім’я",required:!0}),a.name&&(0,r.jsx)("span",{className:s().error,children:a.name})]}),(0,r.jsxs)("label",{className:s().label,children:["Будь ласка, введіть свою електронну адресу:",(0,r.jsx)("input",{className:s().input,type:"email",name:"email",placeholder:"Електронна адреса",required:!0}),a.email&&(0,r.jsx)("span",{className:s().error,children:a.email})]}),(0,r.jsxs)("label",{className:s().label,children:["Будь ласка, введіть свою країну:",(0,r.jsx)("input",{className:s().input,type:"text",name:"country",placeholder:"Країна",required:!0}),a.country&&(0,r.jsx)("span",{className:s().error,children:a.country})]}),(0,r.jsxs)("label",{className:s().label,children:["Будь ласка, введіть свою адресу:",(0,r.jsx)("input",{className:s().input,type:"text",name:"address",placeholder:"Адреса",required:!0}),a.address&&(0,r.jsx)("span",{className:s().error,children:a.address})]}),(0,r.jsx)("h2",{className:s().delivery,children:"Доставка:"}),(0,r.jsxs)("label",{className:s().deliveryOption,children:[(0,r.jsx)("input",{className:s().deliveryInput,type:"radio",name:"delivery",value:"ukraine"}),"По Україні"]}),(0,r.jsxs)("label",{className:s().deliveryOption,children:[(0,r.jsx)("input",{className:s().deliveryInput,type:"radio",name:"delivery",value:"world"}),"По Світy"]}),a.delivery&&(0,r.jsx)("span",{className:s().error,children:a.delivery}),(0,r.jsx)("h2",{className:s().payment,children:"Оплата:"}),(0,r.jsxs)("label",{className:s().paymentOption,children:[(0,r.jsx)("input",{className:s().paymentInput,type:"radio",name:"payment",value:"credit-card"}),"Кредитна карта"]}),(0,r.jsxs)("label",{className:s().paymentOption,children:[(0,r.jsx)("input",{className:s().paymentInput,type:"radio",name:"payment",value:"cash-on-delivery"}),"Накладний платіж (тільки Україна)"]}),(0,r.jsxs)("label",{className:s().paymentOption,children:[(0,r.jsx)("input",{className:s().paymentInput,type:"radio",name:"payment",value:"paypal"}),"PayPal"]}),a.payment&&(0,r.jsx)("span",{className:s().error,children:a.payment}),(0,r.jsxs)("div",{className:s().cartItems,children:[(0,r.jsxs)("div",{className:s().header,children:[(0,r.jsx)("div",{className:s().titleOrder,children:"НАЙМЕНУВАННЯ"}),(0,r.jsx)("div",{className:s().size,children:"РОЗМІР"}),(0,r.jsx)("div",{className:s().quantity,children:"КІЛЬКІСТЬ"}),(0,r.jsx)("div",{className:s().price,children:"ВАРТІСТЬ"})]}),(0,r.jsx)("div",{className:s().cartItems,children:e.map(e=>(0,r.jsxs)("div",{className:s().cartItem,children:[(0,r.jsxs)("div",{className:s().leftColumn,children:[(0,r.jsx)("h2",{className:s().name,children:e.name}),(0,r.jsx)("div",{className:s().imageWrapper,children:(0,r.jsx)(o(),{src:"/images/products/".concat(e.slug,"/").concat(e.slug,".jpg"),alt:e.name,width:188,height:240,className:s().image})})]}),(0,r.jsxs)("div",{className:s().rightColumn,children:[(0,r.jsx)("button",{className:s().removeButton,onClick:()=>t(e.id),children:"✕"}),(0,r.jsxs)("select",{className:s().sizeSelector,defaultValue:e.size,children:[(0,r.jsx)("option",{value:"S",children:"S"}),(0,r.jsx)("option",{value:"M",children:"M"}),(0,r.jsx)("option",{value:"L",children:"L"}),(0,r.jsx)("option",{value:"XL",children:"XL"})]}),(0,r.jsx)("input",{className:s().quantityInput,type:"number",defaultValue:e.quantity,min:"1"}),(0,r.jsxs)("p",{className:s().price,children:[Number(e.price)*Number(e.quantity)," грн"]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:s().totalSection,children:[(0,r.jsx)("span",{className:s().totalLabel,children:"СУММА ЗАМОВЛЕННЯ:"}),(0,r.jsxs)("span",{className:s().totalAmount,children:[i," грн"]})]}),(0,r.jsx)("button",{className:s().paymentButton,type:"button",onClick:handleOrderSubmit,children:"ОФОРМИТИ ЗАМОВЛЕННЯ"})]})]})}},4027:function(e,t,a){"use strict";a.r(t),a.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var r=a(7437),n=a(2265);let l=(0,n.createContext)(void 0),CartProvider=e=>{let{children:t}=e,[a,s]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{try{let e=localStorage.getItem("cartItems");if(e){let t=JSON.parse(e);console.log("Loaded cart items from localStorage:",t),s(t)}else console.log("No cart items found in localStorage.")}catch(e){console.error("Ошибка при восстановлении данных корзины:",e)}finally{o(!0)}},[]),(0,n.useEffect)(()=>{i&&(console.log("Saving cart items to localStorage:",a),localStorage.setItem("cartItems",JSON.stringify(a)))},[a,i]),(0,r.jsx)(l.Provider,{value:{cartItems:a,addToCart:e=>{s(t=>{let a=t.find(t=>t.id===e.id&&t.size===e.size);return a?(console.log("Updating quantity for existing item:",a),t.map(t=>t.id===e.id&&t.size===e.size?{...t,quantity:t.quantity+e.quantity}:t)):(console.log("Adding new item to cart:",e),[...t,e])})},removeCartItem:e=>{console.log("Removing item from cart with id:",e),s(t=>t.filter(t=>t.id!==e))}},children:t})},useCart=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useCart must be used within a CartProvider");return e}},3951:function(e){e.exports={checkoutPage:"CheckoutPage_checkoutPage__vLXLh",title:"CheckoutPage_title__eFzt4",details:"CheckoutPage_details___7xt8",name:"CheckoutPage_name__oLKyr",size:"CheckoutPage_size__UIhL7",quantity:"CheckoutPage_quantity__leDgH",price:"CheckoutPage_price__U5_r9",summary:"CheckoutPage_summary__nIhY4",total:"CheckoutPage_total__lx9Ft",form:"CheckoutPage_form__lpStP",label:"CheckoutPage_label__NWMzU",input:"CheckoutPage_input__SeJsq",delivery:"CheckoutPage_delivery__R7_ro",payment:"CheckoutPage_payment__FAdzk",deliveryOption:"CheckoutPage_deliveryOption__rFi1w",paymentOption:"CheckoutPage_paymentOption__RjI1Z",deliveryInput:"CheckoutPage_deliveryInput__0TBP1",paymentInput:"CheckoutPage_paymentInput__JF_9m",header:"CheckoutPage_header__rUUK_",titleOrder:"CheckoutPage_titleOrder__6zOz5",cartItems:"CheckoutPage_cartItems__LEkDE",cartItem:"CheckoutPage_cartItem__vGgmF",leftColumn:"CheckoutPage_leftColumn__vKZ0F",imageWrapper:"CheckoutPage_imageWrapper__43rW9",image:"CheckoutPage_image__kHVQv",rightColumn:"CheckoutPage_rightColumn___SaBP",removeButton:"CheckoutPage_removeButton__Xle2n",sizeSelector:"CheckoutPage_sizeSelector__glJyX",quantityInput:"CheckoutPage_quantityInput__mLiHS",totalSection:"CheckoutPage_totalSection__00Rfg",totalLabel:"CheckoutPage_totalLabel__n10ZU",totalAmount:"CheckoutPage_totalAmount__wpiR5",paymentButton:"CheckoutPage_paymentButton__vSuev",error:"CheckoutPage_error__vCBr7"}},622:function(e,t,a){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=a(2265),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,a){var r,l={},c=null,u=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!o.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:u,props:l,_owner:i.current}}t.Fragment=l,t.jsx=q,t.jsxs=q},7437:function(e,t,a){"use strict";e.exports=a(622)},6691:function(e,t,a){e.exports=a(679)}},function(e){e.O(0,[413,971,472,744],function(){return e(e.s=6483)}),_N_E=e.O()}]);